"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const denali_cli_1 = require("denali-cli");
const moment = require("moment");
const assert = require("assert");
/**
 * Generates a database schema migration
 *
 * @package blueprints
 */
class MigrationBlueprint extends denali_cli_1.Blueprint {
    locals(argv) {
        let name = argv.name;
        assert(name, 'You must provide a name for this migration');
        let filename = `${moment().format('X')}-${name}`;
        return { name, filename };
    }
}
/* tslint:disable:completed-docs typedef */
MigrationBlueprint.blueprintName = 'migration';
MigrationBlueprint.description = 'Generates a database schema migration';
MigrationBlueprint.longDescription = denali_cli_1.unwrap `
    Usage: denali generate migration <name> [options]

    Generates a new blank migration. The filename will include the current Unix timestamp to ensure
    proper sorting and execution order when running migrations.

    Guides: http://denalijs.org/master/guides/data/migrations/
  `;
MigrationBlueprint.params = '<name>';
exports.default = MigrationBlueprint;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2FjYnVyZGluZS9Qcm9qZWN0cy9kZW5hbGkvZGVuYWxpLyIsInNvdXJjZXMiOlsiYmx1ZXByaW50cy9taWdyYXRpb24vaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQ0FBK0M7QUFDL0MsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUVqQzs7OztHQUlHO0FBQ0gsd0JBQXdDLFNBQVEsc0JBQVM7SUFnQnZELE1BQU0sQ0FBQyxJQUFTO1FBQ2QsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUNyQixNQUFNLENBQUMsSUFBSSxFQUFFLDRDQUE0QyxDQUFDLENBQUM7UUFDM0QsSUFBSSxRQUFRLEdBQUcsR0FBSSxNQUFNLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFFLElBQUssSUFBSyxFQUFFLENBQUM7UUFDckQsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDO0lBQzVCLENBQUM7O0FBbkJELDJDQUEyQztBQUNwQyxnQ0FBYSxHQUFHLFdBQVcsQ0FBQztBQUM1Qiw4QkFBVyxHQUFHLHVDQUF1QyxDQUFDO0FBQ3RELGtDQUFlLEdBQUcsbUJBQU0sQ0FBQTs7Ozs7OztHQU85QixDQUFDO0FBRUsseUJBQU0sR0FBRyxRQUFRLENBQUM7QUFkM0IscUNBdUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmx1ZXByaW50LCB1bndyYXAgfSBmcm9tICdkZW5hbGktY2xpJztcbmltcG9ydCAqIGFzIG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0ICogYXMgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgZGF0YWJhc2Ugc2NoZW1hIG1pZ3JhdGlvblxuICpcbiAqIEBwYWNrYWdlIGJsdWVwcmludHNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlncmF0aW9uQmx1ZXByaW50IGV4dGVuZHMgQmx1ZXByaW50IHtcblxuICAvKiB0c2xpbnQ6ZGlzYWJsZTpjb21wbGV0ZWQtZG9jcyB0eXBlZGVmICovXG4gIHN0YXRpYyBibHVlcHJpbnROYW1lID0gJ21pZ3JhdGlvbic7XG4gIHN0YXRpYyBkZXNjcmlwdGlvbiA9ICdHZW5lcmF0ZXMgYSBkYXRhYmFzZSBzY2hlbWEgbWlncmF0aW9uJztcbiAgc3RhdGljIGxvbmdEZXNjcmlwdGlvbiA9IHVud3JhcGBcbiAgICBVc2FnZTogZGVuYWxpIGdlbmVyYXRlIG1pZ3JhdGlvbiA8bmFtZT4gW29wdGlvbnNdXG5cbiAgICBHZW5lcmF0ZXMgYSBuZXcgYmxhbmsgbWlncmF0aW9uLiBUaGUgZmlsZW5hbWUgd2lsbCBpbmNsdWRlIHRoZSBjdXJyZW50IFVuaXggdGltZXN0YW1wIHRvIGVuc3VyZVxuICAgIHByb3BlciBzb3J0aW5nIGFuZCBleGVjdXRpb24gb3JkZXIgd2hlbiBydW5uaW5nIG1pZ3JhdGlvbnMuXG5cbiAgICBHdWlkZXM6IGh0dHA6Ly9kZW5hbGlqcy5vcmcvbWFzdGVyL2d1aWRlcy9kYXRhL21pZ3JhdGlvbnMvXG4gIGA7XG5cbiAgc3RhdGljIHBhcmFtcyA9ICc8bmFtZT4nO1xuXG4gIGxvY2Fscyhhcmd2OiBhbnkpIHtcbiAgICBsZXQgbmFtZSA9IGFyZ3YubmFtZTtcbiAgICBhc3NlcnQobmFtZSwgJ1lvdSBtdXN0IHByb3ZpZGUgYSBuYW1lIGZvciB0aGlzIG1pZ3JhdGlvbicpO1xuICAgIGxldCBmaWxlbmFtZSA9IGAkeyBtb21lbnQoKS5mb3JtYXQoJ1gnKSB9LSR7IG5hbWUgfWA7XG4gICAgcmV0dXJuIHsgbmFtZSwgZmlsZW5hbWUgfTtcbiAgfVxuXG59XG4iXX0=