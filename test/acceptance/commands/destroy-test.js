"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const ava_1 = require("ava");
const fs = require("fs-extra");
const path = require("path");
const denali_1 = require("denali");
ava_1.default.beforeEach('generate an action to destroy', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let generate = new denali_1.CommandAcceptanceTest('generate action foobar', { name: 'destroy-command' });
    t.context.dir = generate.dir;
    t.context.generatedFilepath = path.join(generate.dir, 'app', 'actions', 'foobar.js');
    yield generate.run();
    t.true(fs.existsSync(t.context.generatedFilepath), 'file should be generated');
}));
ava_1.default('destroys a blueprint', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let destroy = new denali_1.CommandAcceptanceTest('destroy action foobar', { dir: t.context.dir, populateWithDummy: false });
    yield destroy.run();
    t.false(fs.existsSync(t.context.generatedFilepath), 'file should be removed');
}));
ava_1.default('skips modified files', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let destroy = new denali_1.CommandAcceptanceTest('destroy action foobar', { dir: t.context.dir, populateWithDummy: false });
    fs.appendFileSync(t.context.generatedFilepath, 'foobar');
    yield destroy.run();
    t.true(fs.existsSync(t.context.generatedFilepath), 'file should be generated');
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVzdHJveS10ZXN0LmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9hYnVyZGluZS9Qcm9qZWN0cy9kZW5hbGkvbWFpbi8iLCJzb3VyY2VzIjpbInRlc3QvYWNjZXB0YW5jZS9jb21tYW5kcy9kZXN0cm95LXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkJBQXVCO0FBQ3ZCLCtCQUErQjtBQUMvQiw2QkFBNkI7QUFDN0IsbUNBQStDO0FBRy9DLGFBQUksQ0FBQyxVQUFVLENBQUMsK0JBQStCLEVBQUUsQ0FBTyxDQUFDO0lBQ3ZELElBQUksUUFBUSxHQUFHLElBQUksOEJBQXFCLENBQUMsd0JBQXdCLEVBQUUsRUFBRSxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO0lBQ2hHLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUM7SUFDN0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNyRixNQUFNLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNyQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLDBCQUEwQixDQUFDLENBQUM7QUFDakYsQ0FBQyxDQUFBLENBQUMsQ0FBQztBQUVILGFBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFPLENBQUM7SUFDbkMsSUFBSSxPQUFPLEdBQUcsSUFBSSw4QkFBcUIsQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBRW5ILE1BQU0sT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsd0JBQXdCLENBQUMsQ0FBQztBQUNoRixDQUFDLENBQUEsQ0FBQyxDQUFDO0FBRUgsYUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQU8sQ0FBQztJQUNuQyxJQUFJLE9BQU8sR0FBRyxJQUFJLDhCQUFxQixDQUFDLHVCQUF1QixFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDbkgsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRXpELE1BQU0sT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztBQUNqRixDQUFDLENBQUEsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHRlc3QgZnJvbSAnYXZhJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBDb21tYW5kQWNjZXB0YW5jZVRlc3QgfSBmcm9tICdkZW5hbGknO1xuXG5cbnRlc3QuYmVmb3JlRWFjaCgnZ2VuZXJhdGUgYW4gYWN0aW9uIHRvIGRlc3Ryb3knLCBhc3luYyAodCkgPT4ge1xuICBsZXQgZ2VuZXJhdGUgPSBuZXcgQ29tbWFuZEFjY2VwdGFuY2VUZXN0KCdnZW5lcmF0ZSBhY3Rpb24gZm9vYmFyJywgeyBuYW1lOiAnZGVzdHJveS1jb21tYW5kJyB9KTtcbiAgdC5jb250ZXh0LmRpciA9IGdlbmVyYXRlLmRpcjtcbiAgdC5jb250ZXh0LmdlbmVyYXRlZEZpbGVwYXRoID0gcGF0aC5qb2luKGdlbmVyYXRlLmRpciwgJ2FwcCcsICdhY3Rpb25zJywgJ2Zvb2Jhci5qcycpO1xuICBhd2FpdCBnZW5lcmF0ZS5ydW4oKTtcbiAgdC50cnVlKGZzLmV4aXN0c1N5bmModC5jb250ZXh0LmdlbmVyYXRlZEZpbGVwYXRoKSwgJ2ZpbGUgc2hvdWxkIGJlIGdlbmVyYXRlZCcpO1xufSk7XG5cbnRlc3QoJ2Rlc3Ryb3lzIGEgYmx1ZXByaW50JywgYXN5bmMgKHQpID0+IHtcbiAgbGV0IGRlc3Ryb3kgPSBuZXcgQ29tbWFuZEFjY2VwdGFuY2VUZXN0KCdkZXN0cm95IGFjdGlvbiBmb29iYXInLCB7IGRpcjogdC5jb250ZXh0LmRpciwgcG9wdWxhdGVXaXRoRHVtbXk6IGZhbHNlIH0pO1xuXG4gIGF3YWl0IGRlc3Ryb3kucnVuKCk7XG4gIHQuZmFsc2UoZnMuZXhpc3RzU3luYyh0LmNvbnRleHQuZ2VuZXJhdGVkRmlsZXBhdGgpLCAnZmlsZSBzaG91bGQgYmUgcmVtb3ZlZCcpO1xufSk7XG5cbnRlc3QoJ3NraXBzIG1vZGlmaWVkIGZpbGVzJywgYXN5bmMgKHQpID0+IHtcbiAgbGV0IGRlc3Ryb3kgPSBuZXcgQ29tbWFuZEFjY2VwdGFuY2VUZXN0KCdkZXN0cm95IGFjdGlvbiBmb29iYXInLCB7IGRpcjogdC5jb250ZXh0LmRpciwgcG9wdWxhdGVXaXRoRHVtbXk6IGZhbHNlIH0pO1xuICBmcy5hcHBlbmRGaWxlU3luYyh0LmNvbnRleHQuZ2VuZXJhdGVkRmlsZXBhdGgsICdmb29iYXInKTtcblxuICBhd2FpdCBkZXN0cm95LnJ1bigpO1xuICB0LnRydWUoZnMuZXhpc3RzU3luYyh0LmNvbnRleHQuZ2VuZXJhdGVkRmlsZXBhdGgpLCAnZmlsZSBzaG91bGQgYmUgZ2VuZXJhdGVkJyk7XG59KTtcbiJdfQ==