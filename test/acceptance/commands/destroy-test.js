"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const ava_1 = require("ava");
const fs = require("fs-extra");
const path = require("path");
const denali_cli_1 = require("denali-cli");
ava_1.default.beforeEach('generate an action to destroy', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let generate = new denali_cli_1.CommandAcceptanceTest('generate action foobar', { name: 'destroy-command' });
    t.context.dir = generate.dir;
    t.context.generatedFilepath = path.join(generate.dir, 'app', 'actions', 'foobar.js');
    yield generate.run();
    t.true(fs.existsSync(t.context.generatedFilepath), 'file should be generated');
}));
ava_1.default('destroys a blueprint', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let destroy = new denali_cli_1.CommandAcceptanceTest('destroy action foobar', { dir: t.context.dir, populateWithDummy: false });
    yield destroy.run();
    t.false(fs.existsSync(t.context.generatedFilepath), 'file should be removed');
}));
ava_1.default('skips modified files', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let destroy = new denali_cli_1.CommandAcceptanceTest('destroy action foobar', { dir: t.context.dir, populateWithDummy: false });
    fs.appendFileSync(t.context.generatedFilepath, 'foobar');
    yield destroy.run();
    t.true(fs.existsSync(t.context.generatedFilepath), 'file should be generated');
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVzdHJveS10ZXN0LmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9hY2J1cmRpbmUvUHJvamVjdHMvZGVuYWxpL2RlbmFsaS8iLCJzb3VyY2VzIjpbInRlc3QvYWNjZXB0YW5jZS9jb21tYW5kcy9kZXN0cm95LXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkJBQXVCO0FBQ3ZCLCtCQUErQjtBQUMvQiw2QkFBNkI7QUFDN0IsMkNBQW1EO0FBR25ELGFBQUksQ0FBQyxVQUFVLENBQUMsK0JBQStCLEVBQUUsQ0FBTyxDQUFDO0lBQ3ZELElBQUksUUFBUSxHQUFHLElBQUksa0NBQXFCLENBQUMsd0JBQXdCLEVBQUUsRUFBRSxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO0lBQ2hHLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUM7SUFDN0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNyRixNQUFNLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNyQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLDBCQUEwQixDQUFDLENBQUM7QUFDakYsQ0FBQyxDQUFBLENBQUMsQ0FBQztBQUVILGFBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFPLENBQUM7SUFDbkMsSUFBSSxPQUFPLEdBQUcsSUFBSSxrQ0FBcUIsQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBRW5ILE1BQU0sT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsd0JBQXdCLENBQUMsQ0FBQztBQUNoRixDQUFDLENBQUEsQ0FBQyxDQUFDO0FBRUgsYUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQU8sQ0FBQztJQUNuQyxJQUFJLE9BQU8sR0FBRyxJQUFJLGtDQUFxQixDQUFDLHVCQUF1QixFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDbkgsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRXpELE1BQU0sT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztBQUNqRixDQUFDLENBQUEsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHRlc3QgZnJvbSAnYXZhJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBDb21tYW5kQWNjZXB0YW5jZVRlc3QgfSBmcm9tICdkZW5hbGktY2xpJztcblxuXG50ZXN0LmJlZm9yZUVhY2goJ2dlbmVyYXRlIGFuIGFjdGlvbiB0byBkZXN0cm95JywgYXN5bmMgKHQpID0+IHtcbiAgbGV0IGdlbmVyYXRlID0gbmV3IENvbW1hbmRBY2NlcHRhbmNlVGVzdCgnZ2VuZXJhdGUgYWN0aW9uIGZvb2JhcicsIHsgbmFtZTogJ2Rlc3Ryb3ktY29tbWFuZCcgfSk7XG4gIHQuY29udGV4dC5kaXIgPSBnZW5lcmF0ZS5kaXI7XG4gIHQuY29udGV4dC5nZW5lcmF0ZWRGaWxlcGF0aCA9IHBhdGguam9pbihnZW5lcmF0ZS5kaXIsICdhcHAnLCAnYWN0aW9ucycsICdmb29iYXIuanMnKTtcbiAgYXdhaXQgZ2VuZXJhdGUucnVuKCk7XG4gIHQudHJ1ZShmcy5leGlzdHNTeW5jKHQuY29udGV4dC5nZW5lcmF0ZWRGaWxlcGF0aCksICdmaWxlIHNob3VsZCBiZSBnZW5lcmF0ZWQnKTtcbn0pO1xuXG50ZXN0KCdkZXN0cm95cyBhIGJsdWVwcmludCcsIGFzeW5jICh0KSA9PiB7XG4gIGxldCBkZXN0cm95ID0gbmV3IENvbW1hbmRBY2NlcHRhbmNlVGVzdCgnZGVzdHJveSBhY3Rpb24gZm9vYmFyJywgeyBkaXI6IHQuY29udGV4dC5kaXIsIHBvcHVsYXRlV2l0aER1bW15OiBmYWxzZSB9KTtcblxuICBhd2FpdCBkZXN0cm95LnJ1bigpO1xuICB0LmZhbHNlKGZzLmV4aXN0c1N5bmModC5jb250ZXh0LmdlbmVyYXRlZEZpbGVwYXRoKSwgJ2ZpbGUgc2hvdWxkIGJlIHJlbW92ZWQnKTtcbn0pO1xuXG50ZXN0KCdza2lwcyBtb2RpZmllZCBmaWxlcycsIGFzeW5jICh0KSA9PiB7XG4gIGxldCBkZXN0cm95ID0gbmV3IENvbW1hbmRBY2NlcHRhbmNlVGVzdCgnZGVzdHJveSBhY3Rpb24gZm9vYmFyJywgeyBkaXI6IHQuY29udGV4dC5kaXIsIHBvcHVsYXRlV2l0aER1bW15OiBmYWxzZSB9KTtcbiAgZnMuYXBwZW5kRmlsZVN5bmModC5jb250ZXh0LmdlbmVyYXRlZEZpbGVwYXRoLCAnZm9vYmFyJyk7XG5cbiAgYXdhaXQgZGVzdHJveS5ydW4oKTtcbiAgdC50cnVlKGZzLmV4aXN0c1N5bmModC5jb250ZXh0LmdlbmVyYXRlZEZpbGVwYXRoKSwgJ2ZpbGUgc2hvdWxkIGJlIGdlbmVyYXRlZCcpO1xufSk7XG4iXX0=